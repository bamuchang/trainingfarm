<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç‰§å ´</title>
</head>
<body>
  <div class="outer-container"> 
  <h1 class="header">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç‰§å ´</h1>

 
  <div class="inner-container"> 
    ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¨˜éŒ²ã™ã‚‹ã“ã¨ã§ã€çš†ã•ã‚“ã®ç¶™ç¶šã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ï¼<br>
    å³ä¸‹ã®å‹•ç‰©ãŸã¡ã¨ä¸€ç·’ã«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã¦ã€<br>
    ç‰§å ´ã®ã™ã¹ã¦ã®å‹•ç‰©ãŸã¡ã®ä½“å‹ã‚’å…ƒã«æˆ»ã—ã¾ã—ã‚‡ã†ï¼


  

  <h2>ä»Šæ—¥ã®ç›®æ¨™ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ï¼</h2>
  <div>
    <input type="date" id="decide-goal-date">
    <select id="decide-goal-exercise">
      <option value="bench-press">ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹</option>
      <option value="squat">ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ</option>
      <option value="deadlift">ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆ</option>
      <option value="push-up">è…•ç«‹ã¦</option>
      <option value="machine">ãã®ä»–(ãƒã‚·ãƒ³)</option>
      <option value="bodyweight">ãã®ä»–(è‡ªé‡)</option>
    </select>
    <br>
    ç›®æ¨™å›æ•°: <input type="number" id="decide-goal" min="0">
    ç›®æ¨™é‡é‡(kg): <input type="number" id="decide-goal-weight" min="0">
    <button id="goal-button">ç›®æ¨™ã‚’è¨­å®š</button>
  </div>

  <!-- å®Ÿç¸¾ã‚’è¨˜éŒ²ã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <h2>ã‚„ã£ãŸå†…å®¹ã‚’è¨˜éŒ²ã—ã¾ã—ã‚‡ã†ï¼</h2>
  <div>
    <input type="date" id="record-results-date">
    <select id="record-results-exercise">
      <option value="bench-press">ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹</option>
      <option value="squat">ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ</option>
      <option value="deadlift">ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆ</option>
      <option value="push-up">è…•ç«‹ã¦</option>
      <option value="machine">ãã®ä»–(ãƒã‚·ãƒ³)</option>
      <option value="bodyweight">ãã®ä»–(è‡ªé‡)</option>
    </select>
    <br>
    å›æ•°: <input type="number" id="record-results" min="0">
    é‡é‡(kg): <input type="number" id="record-results-weight" min="0">
    <button id="results-button">è¨˜éŒ²</button>
  </div>

  <!-- çµæœè¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <div>
    <h3>ç›®æ¨™</h3>
    <div id="goals-display"></div>
    <h3>ä»Šæ—¥ã®è¨˜éŒ²</h3>
    <div id="today-results-display"></div>
    <h3>ç›®æ¨™é”æˆåº¦</h3>
    <div id="proportion-display">ç›®æ¨™é”æˆåº¦: 0%</div>
  </div>
  <div class="text-box" id="AA">
    é£Ÿã¹éãã¡ã‚ƒã£ãŸ<br>
    ã€€ã€€âˆ§ï¼¿âˆ§<br>
 âŠ‚/Â´ï½¥ğŸ½ï½¥ï½€ãƒ½âŠƒ<br>
 ã€€!ã€€ã€€ã€€ã€€ã€€i<br>
   ã€€ã‚ cï¼¿c_,.ãƒ<br>
   æ­£æœˆå¤ªã‚Šã®ãƒ–ã‚¿ã•ã‚“ã‚’ç—©ã›ã•ã›ã‚ˆã†ï¼   

  </div>
 </div>
 </div>
  <script>
    let goals = {}; // ç¨®ç›®ã”ã¨ã®ç›®æ¨™ã‚’é‡é‡åˆ¥ã«ä¿å­˜
    let results = {}; // ç¨®ç›®ã”ã¨ã®å®Ÿç¸¾ã‚’é‡é‡åˆ¥ã«ä¿å­˜
    let lastGoalDate = null; // æœ€å¾Œã«ç›®æ¨™ã‚’è¨˜éŒ²ã—ãŸæ—¥ä»˜
    let lastResultDate = null; // æœ€å¾Œã«å®Ÿç¸¾ã‚’è¨˜éŒ²ã—ãŸæ—¥ä»˜

    // ç›®æ¨™ã‚’è¨­å®šã™ã‚‹å‡¦ç†
    document.getElementById('goal-button').addEventListener('click', () => {
      const date = document.getElementById('decide-goal-date').value;
      const exercise = document.getElementById('decide-goal-exercise').value;
      const goalReps = parseInt(document.getElementById('decide-goal').value, 10);
      const goalWeight = parseInt(document.getElementById('decide-goal-weight').value, 10);

      if (!date || isNaN(goalReps) || isNaN(goalWeight)) {
        alert('ç›®æ¨™ã®å…¨ã¦ã®é …ç›®ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
        return;
      }

      // æ—¥ä»˜ãŒç•°ãªã‚‹å ´åˆã€ç›®æ¨™ã‚’æ›´æ–°ã—å®Ÿç¸¾ã¨ç›®æ¨™é”æˆç‡ã‚’ãƒªã‚»ãƒƒãƒˆ
      if (lastGoalDate && lastGoalDate !== date) {
        results = {}; // å®Ÿç¸¾ãƒªã‚»ãƒƒãƒˆ
        updateTodayResultsDisplay(); // å®Ÿç¸¾è¡¨ç¤ºã‚’æ›´æ–°
        updateProportionDisplay(); // ç›®æ¨™é”æˆç‡ãƒªã‚»ãƒƒãƒˆ
      }

      if (!goals[exercise]) goals[exercise] = {};

      // é‡é‡ã”ã¨ã«ç›®æ¨™ã‚’ä¿å­˜
      goals[exercise][goalWeight] = { date, reps: goalReps, weight: goalWeight };
      lastGoalDate = date;

      updateGoalsDisplay();
      alert('ç›®æ¨™ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼');
    });

    // å®Ÿç¸¾ã‚’è¨˜éŒ²ã™ã‚‹å‡¦ç†
    document.getElementById('results-button').addEventListener('click', () => {
      const date = document.getElementById('record-results-date').value;
      const exercise = document.getElementById('record-results-exercise').value;
      const resultReps = parseInt(document.getElementById('record-results').value, 10);
      const resultWeight = parseInt(document.getElementById('record-results-weight').value, 10);

      if (!date || isNaN(resultReps) || isNaN(resultWeight)) {
        alert('å®Ÿç¸¾ã®å…¨ã¦ã®é …ç›®ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
        return;
      }

      // å®Ÿç¸¾ã®æ—¥ä»˜ãŒç›®æ¨™ã®æ—¥ä»˜ã¨ç•°ãªã‚‹å ´åˆ
      if (lastGoalDate && lastGoalDate !== date) {
        alert('ç›®æ¨™ã‚’æ›´æ–°ã—ã¦ãã ã•ã„');
        return;
      }

      if (!results[exercise]) results[exercise] = {};

      // é‡é‡ãŒä¸€è‡´ã™ã‚‹å ´åˆã¯å›æ•°ã‚’åŠ ç®—ã€ãã†ã§ãªã„å ´åˆã¯æ–°ã—ã„é‡é‡ã‚’è¿½åŠ 
      if (results[exercise][resultWeight]) {
        results[exercise][resultWeight].reps += resultReps;
      } else {
        results[exercise][resultWeight] = { date, reps: resultReps, weight: resultWeight };
      }
      lastResultDate = date;

      updateTodayResultsDisplay();
      updateProportionDisplay();
    });

    // ç›®æ¨™ã®è¡¨ç¤ºã‚’æ›´æ–°
    function updateGoalsDisplay() {
      const display = document.getElementById('goals-display');
      display.innerHTML = '';
      for (const [exercise, weights] of Object.entries(goals)) {
        display.innerHTML += `<h4>${exercise}</h4>`;
        for (const [weight, data] of Object.entries(weights)) {
          display.innerHTML += `<p>${weight}kg: ${data.reps}å› (æ—¥ä»˜: ${data.date})</p>`;
        }
      }
    }

    // ä»Šæ—¥ã®è¨˜éŒ²ã®è¡¨ç¤ºã‚’æ›´æ–°
    function updateTodayResultsDisplay() {
      const display = document.getElementById('today-results-display');
      display.innerHTML = '';
      for (const [exercise, weights] of Object.entries(results)) {
        display.innerHTML += `<h4>${exercise}</h4>`;
        for (const [weight, data] of Object.entries(weights)) {
          display.innerHTML += `<p>${weight}kg: ${data.reps}å› (æ—¥ä»˜: ${data.date})</p>`;
        }
      }
    }

    // ç›®æ¨™é”æˆåº¦ã®è¡¨ç¤ºã‚’æ›´æ–°


function updateProportionDisplay() {
  const display = document.getElementById('proportion-display');
  display.innerHTML = '';
  const textBox = document.getElementById("AA");
  const originalText = textBox.innerHTML;
  const newText = `ç—©ã›ãŸã‚ˆï¼<br>
          ã€‡âŒ’ãƒ˜âŒ’ã€‡ãƒ• ))<br>
          ï½(ã€€ã€ˆ   à¹‘â€¢ğŸ½â€¢ã€‰<br>
          ã€€ã—ãƒ¼ï¼µï¼ï¼µ<br>
       æ˜æ—¥ã‚‚ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é ‘å¼µã‚ã†ï¼`;

  let allExercisesComplete = true; // å…¨ã¦ã®exerciseãŒ100%ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ãƒ•ãƒ©ã‚°

  for (const [exercise, goalWeights] of Object.entries(goals)) {
    let totalResult = 0;
    let exerciseComplete = true; // ã“ã®exerciseãŒ100%ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ãƒ•ãƒ©ã‚°

    if (results[exercise]) {
      for (const [weight, resultData] of Object.entries(results[exercise])) {
        totalResult += weight * resultData.reps;
      }
    }

    for (const [weight, goalData] of Object.entries(goalWeights)) {
      const goalValue = weight * goalData.reps;
      const proportion = totalResult > 0 ? (totalResult / goalValue) * 100 : 0;
      display.innerHTML += `<p>${exercise} (${weight}kg): ${proportion.toFixed(2)}%</p>`;

      // ç›®æ¨™ãŒ100%ã«é”ã—ã¦ã„ãªã„å ´åˆã€ã“ã®exerciseã¯æœªå®Œäº†
      if (proportion < 100) {
        exerciseComplete = false;
      }
    }

    // ã“ã®exerciseãŒæœªå®Œäº†ã®å ´åˆã€å…¨ä½“ã®ãƒ•ãƒ©ã‚°ã‚’falseã«è¨­å®š
    if (!exerciseComplete) {
      allExercisesComplete = false;
    }
  }

  // å…¨ã¦ã®exerciseãŒå®Œäº†ã—ã¦ã„ã‚‹å ´åˆã«ã®ã¿ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´
  if (allExercisesComplete) {
    textBox.innerHTML = newText;
  } else {
    textBox.innerHTML = originalText; // ç›®æ¨™æœªé”æˆã®å ´åˆã€å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¶­æŒ
  }
}
  </script>

 <style>
 body {
  margin: 0; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä½™ç™½ã‚’å‰Šé™¤ */
  padding: 0; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä½™ç™½ã‚’å‰Šé™¤ */
  box-sizing: border-box;
  background-color: white;
 }

 
 
 .outer-container {
            padding: 40px 20px 20px; /* ä¸Šéƒ¨60pxã€å·¦å³20pxã®ä½™ç™½ã‚’ä½œæˆ */
            background-color: lightblue;
            box-sizing: border-box;
        }

        .inner-container {
            position: relative;
            max-width: 800px; /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æœ€å¤§å¹…ã‚’è¨­å®š */
            margin: 0 auto; /* ä¸­å¤®æƒãˆ */
            background-color: white; /* å¿…è¦ã«å¿œã˜ã¦èƒŒæ™¯è‰²ã‚’è¨­å®š */
            padding: 20px; /* å†…å´ã®ä½™ç™½ */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«å½±ã‚’ä»˜ã‘ã‚‹ï¼ˆä»»æ„ï¼‰ */
            box-sizing: border-box;
            overflow: hidden;
        }

 .header {
  text-align: center;
  height: 40px;
  line-height: 40px; /* å‚ç›´æ–¹å‘ã®ä¸­å¤®æƒãˆ */
  margin: 0 auto; /* è¦‹å‡ºã—ã®ä½™ç™½ã‚’å‰Šé™¤ */
  font-size: 30px;
  color: #333;
 }

 .text-box {
        position: absolute;
        bottom: 10px; /* ä¸‹ã‹ã‚‰ã®è·é›¢ */
        right: 10px; /* å³ã‹ã‚‰ã®è·é›¢ */
        max-width: calc(100% - 20px); /* å†…å´ã®ä½™ç™½ã‚’è€ƒæ…®ã—ã¦æœ€å¤§å¹…ã‚’èª¿æ•´ */
        font-size: 14px;
        background-color: rgba(255, 255, 255); /* èƒŒæ™¯ã‚’åŠé€æ˜ã«ã™ã‚‹ä¾‹ */
        padding: 10px;
        border-radius: 5px;
        box-sizing: border-box; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å«ã‚€ã‚µã‚¤ã‚ºè¨ˆç®— */
        word-wrap: break-word; /* ãƒ†ã‚­ã‚¹ãƒˆãŒé•·ã„å ´åˆã«æŠ˜ã‚Šè¿”ã™ */
    }
 </style>
</body>

</html>